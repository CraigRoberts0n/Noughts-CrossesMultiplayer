(this["webpackJsonpnoughts-crossesmultiplayer"]=this["webpackJsonpnoughts-crossesmultiplayer"]||[]).push([[0],{102:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=a(13),i=a(6),m=a(59),s=a.n(m),u=(a(101),a(102),a(5)),E=a(115),f=a(110);var d,b=function(e){var t=e.value,a=e.onClick;return r.a.createElement("button",{className:"square",onClick:a},t)},v=function(e){var t=e.socket,a=Object(i.f)(),o=Object(n.useState)(Array(9).fill(null)),c=Object(u.a)(o,2),m=c[0],s=c[1],d=Object(n.useState)(!0),v=Object(u.a)(d,2),p=v[0],O=v[1],g=Object(n.useState)(""),j=Object(u.a)(g,2),h=j[0],S=j[1],k=Object(n.useState)(""),N=Object(u.a)(k,2),w=N[0],C=N[1],y=Object(n.useState)(""),G=Object(u.a)(y,2),R=G[0],x=G[1],I=Object(n.useState)(!1),H=Object(u.a)(I,2),M=H[0],D=H[1],J=Object(n.useState)({id:"",name:"",identifier:""}),P=Object(u.a)(J,2),A=P[0],B=P[1],W=Object(n.useState)(""),q=Object(u.a)(W,2),F=q[0],T=q[1],L=Object(n.useState)(!1),U=Object(u.a)(L,2),Y=U[0],$=U[1],z=Object(n.useState)(""),K=Object(u.a)(z,2),Q=K[0],V=K[1],X=Object(n.useState)(!1),Z=Object(u.a)(X,2),_=Z[0],ee=Z[1],te=Object(n.useState)(!1),ae=Object(u.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)({variant:"",endGameMessage:""}),ce=Object(u.a)(oe,2),le=ce[0],ie=ce[1];Object(n.useEffect)((function(){var e=a.state,n=e.name,r=e.room,o=e.method;return C(n),"CREATE"===o?(x(r),D(!1),$(!0),S("\u274c")):(x(r),D(!0),$(!0),S("\u2b55"),t.emit("getOppDetails",{room:r})),function(){$(!1),t.emit("removeRoom",{room:r}),t.emit("disconnect",{room:r})}}),[a,t]),Object(n.useEffect)((function(){t.on("oppDetails",(function(e){var a=Object(u.a)(e,2),n=a[0],r=n.id,o=n.name,c=a[1],l=c.id,i=c.name;T(""),r!==t.id?B({id:r,name:o,identifier:"\u274c"}):B({id:l,name:i,identifier:"\u2b55"})}))}),[t]),Object(n.useEffect)((function(){t.on("userDisconnect",(function(){Y&&(T("Opponent Disconnected - Please Go Back to Home"),re(!0))}))}),[t,Y]),Object(n.useEffect)((function(){t.on("updateSquares",(function(e){var t=e.squares,a=e.xIsNext;T(""),s(t),D(!1),O(!a)}))}),[M,t]);var me=function(e){return r.a.createElement(b,{value:m[e],onClick:function(){return function(e){var a=m.slice();if(se(a)||a[e]||M||!A.name||_||ne)return a[e]&&T("Selected different Square"),M&&T("Please Wait for Opponent to Play Turn"),A.name||T("Please Wait for an Opponent to Join"),_&&T("Game is Finished, Go back to Homepage"),void(ne&&T("Opponent Disconnected - Please Go Back to Home"));a[e]=p?"\u274c":"\u2b55",T(""),s(a),O(!p),D(!0),t.emit("turnPlayed",{name:w,room:R,updateSquares:a,xIsNext:p})}(e)}})},se=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a++){var n=Object(u.a)(t[a],3),r=n[0],o=n[1],c=n[2];if(e[r]&&e[r]===e[o]&&e[r]===e[c])return{winningIdentifier:e[r]}}return 9===e.reduce((function(e,t){return e+(null!==t)}),0)?{winningIdentifier:"tie"}:null};return Object(n.useEffect)((function(){var e=se(m);e?(ee(!0),"tie"===e.winningIdentifier?ie({variant:"warning",endGameMessage:"Game is a Tie!"}):e.winningIdentifier===h?ie({variant:"success",endGameMessage:"Winner Winner!"}):ie({variant:"danger",endGameMessage:"Hard Luck!"})):V("Next player: ".concat(p?"\u274c":"\u2b55"))}),[m,p,h]),r.a.createElement("div",null,F&&r.a.createElement(E.a,{variant:"danger",onClose:function(){return T("")},dismissible:!0},r.a.createElement(E.a.Heading,null,F)),_?r.a.createElement(E.a,{variant:le.variant},r.a.createElement(E.a.Heading,null,le.endGameMessage," ",r.a.createElement(E.a.Link,null,r.a.createElement(l.b,{to:"/"}," Go Back to Home ")))):null,A.name?null:r.a.createElement(E.a,{variant:"info"},r.a.createElement(E.a.Heading,null,"Please Wait for an Opponent to Join")),r.a.createElement(f.a,{className:"gameInfoContainer"},r.a.createElement("div",null,"Room Identifier: ",r.a.createElement("b",null,R)),r.a.createElement("div",null,r.a.createElement("p",null,"Your Username: ",r.a.createElement("b",null,w)," | Your Identifier ",h," ")),r.a.createElement("div",{className:"opp"},A.name?"Playing against ".concat(A.name):null),r.a.createElement("div",{className:"status"},Q)),r.a.createElement(f.a,{className:"gameBoard"},r.a.createElement("div",{className:"board-row"},me(0),me(1),me(2)),r.a.createElement("div",{className:"board-row"},me(3),me(4),me(5)),r.a.createElement("div",{className:"board-row"},me(6),me(7),me(8))))},p=a(112),O=a(63),g=a(113),j=a(111),h=function(e){var t=e.name,a=e.setName,o=e.room,c=e.setRoom,l=e.socket,m=e.setErrorMessage,s=Object(n.useState)(!1),E=Object(u.a)(s,2),d=E[0],b=E[1];return d?r.a.createElement(i.a,{to:{pathname:"/board",state:{name:t,room:o,method:"CREATE"}}}):r.a.createElement(f.a,null,r.a.createElement(g.a,{onSubmit:function(e){e.preventDefault(),t?l.emit("create",{name:t},(function(e){var t=e.error,a=e.room;t?m(t):(c(a),b(!0))})):m("Enter all Fields")}},r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Create"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Enter Name",name:t,value:t,onChange:function(e){return a(e.target.value)}})),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Create Game")))},S=function(e){var t=e.name,a=e.setName,o=e.room,c=e.setRoom,l=e.socket,m=e.setErrorMessage,s=Object(n.useState)(!1),E=Object(u.a)(s,2),d=E[0],b=E[1];return d?r.a.createElement(i.a,{to:{pathname:"/board",state:{name:t,room:o,method:"JOIN"}}}):r.a.createElement(f.a,null,r.a.createElement(g.a,{onSubmit:function(e){e.preventDefault(),t&&o?l.emit("join",{name:t,room:o},(function(e){var t=e.error;t?m(t):b(!0)})):m("Enter all Fields")}},r.a.createElement(g.a.Group,null,r.a.createElement(g.a.Label,null,"Join"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Enter Name",name:t,value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement(g.a.Control,{type:"text",placeholder:"Enter Room ID",name:o,value:o,onChange:function(e){return c(e.target.value)}})),r.a.createElement(j.a,{variant:"primary",type:"submit"},"Join Game")))},k=function(e){var t=e.socket,a=e.users,o=e.setUsers;return Object(n.useEffect)((function(){return t.emit("getActiveRooms",(function(e){o(e)})),t.on("updateActiveRooms",(function(e){o(e)})),function(){t.off()}}),[t,o]),r.a.createElement(f.a,null,r.a.createElement("u",null,r.a.createElement("p",null,"Active Rooms")),a.length>0?a.map((function(e){var t=e.room;return r.a.createElement("div",{key:t},t)})):r.a.createElement("p",null,"There are no active Rooms"))},N=function(e){var t=e.socket,a=Object(n.useState)(""),o=Object(u.a)(a,2),c=o[0],l=o[1],i=Object(n.useState)(""),m=Object(u.a)(i,2),s=m[0],d=m[1],b=Object(n.useState)(""),v=Object(u.a)(b,2),g=v[0],j=v[1],N=Object(n.useState)([]),w=Object(u.a)(N,2),C=w[0],y=w[1];return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(E.a,{variant:"danger",onClose:function(){return l("")},dismissible:!0},r.a.createElement(E.a.Heading,null,c)):null,r.a.createElement(f.a,{className:"mainHomeContainer"},r.a.createElement(p.a,null,r.a.createElement(O.a,null,r.a.createElement("div",{className:"Create"},r.a.createElement(h,{socket:t,name:s,setName:d,room:g,setRoom:j,setErrorMessage:l})),r.a.createElement("div",{className:"Join"},r.a.createElement(S,{socket:t,name:s,setName:d,room:g,setRoom:j,setErrorMessage:l}))),r.a.createElement(O.a,{xs:4},r.a.createElement("div",{className:"ActiveRooms"},r.a.createElement(k,{socket:t,users:C,setUsers:y}))))))},w=a(114),C=function(){return r.a.createElement(w.a,{bg:"light",expand:"lg"},r.a.createElement(l.b,{to:"/"},r.a.createElement(w.a.Brand,null,"Noughts & Crosses - ",r.a.createElement("span",{role:"img","aria-label":"emoji"},"\u274c \u2b55"))))},y=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",{style:{margin:"4px"}},"Craig Robertson"))};d=s.a.connect("".concat(window.location.hostname,":").concat(window.location.port));var G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null,r.a.createElement(C,null),r.a.createElement(i.b,{path:"/",exact:!0,component:function(){return r.a.createElement(N,{socket:d})}}),r.a.createElement(i.b,{path:"/board",component:function(){return r.a.createElement(v,{socket:d})}}),r.a.createElement(y,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,a){e.exports=a(108)},98:function(e,t){}},[[64,1,2]]]);
//# sourceMappingURL=main.d8092a0c.chunk.js.map